spring.application.name=violeta-backend-nucleo

server.port=${VIOLETABACKENDNUCLEO_PORT:5986}

# === CONFIGURACIÓN DE BASE DE DATOS DESARROLLO ===
spring.datasource.url=jdbc:mariadb://${VIOLETABACKENDNUCLEO_DB:localhost:3308/20251102_multiempresa}?useSSL=false
spring.datasource.username=${VIOLETABACKENDNUCLEO_DB_USERNAME:}
spring.datasource.password=${VIOLETABACKENDNUCLEO_DB_PASSWORD:}
spring.datasource.hikari.maximum-pool-size=5

# === CONFIGURACIÓN DE HIBERNATE DESARROLLO ===
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
# create, create-drop
spring.jpa.hibernate.ddl-auto=none
spring.flyway.enabled=false

# === CONFIGURACIÓN DE SEGURIDAD BÁSICA ===
spring.security.user.name=username
spring.security.user.password=password

# === CONFIGURACIÓN DE LOGGING PRODUCCIÓN ===
# mandar a archivo
logging.file.name=logfile.log
logging.level.org.springframework.jdbc.core.JdbcTemplate=warn
logging.level.org.springframework.jdbc.core.StatementCreatorUtils=warn
logging.level.SECURITY_AUDIT=info
logging.level.com.lavioleta.desarrollo.violetaserver.service.impl.LoginServiceImpl=info

# === CONFIGURACIÓN DE NEGOCIO ===
# Sucursal activa por defecto para el sistema
app.sucursal.activa=${SUCURSAL_ACTIVA:S1}


# === CONFIGURACIÓN DE SEGURIDAD PARA PRODUCCIÓN ===
# Configuración más estricta para ambiente productivo

# Configuración de intentos fallidos y bloqueo temporal
security.login.max-attempts=3
security.login.lockout-duration-minutes=30
security.login.admin-max-attempts=5
security.login.enable-rate-limiting=true
security.login.persistent-lockout=true
security.login.cleanup-interval-hours=12

# Auditoría completa en producción
security.login.enable-audit-log=true
security.login.log-failed-attempts=true
security.login.log-successful-logins=true

# Sesión más corta en producción
security.session.duration-hours=4
security.session.extend-on-activity=false
security.session.secure-cookies=true

# === CONFIGURACIÓN DE AUTORIZACIÓN PRODUCCIÓN ===
security.authorization.cache.ttl=PT5M
security.authorization.cache.maximum-size=1000
security.authorization.version.min=1.0
security.authorization.version.sub=0
security.authorization.version.grace-minutes=5
security.authorization.enforcement-enabled=true

# Mostrar SQL queries formateadas
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# Naming strategy - usar nombres exactos de las columnas especificadas en @Column
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl


# === CONFIGURACIÓN DE SERVIDOR PRODUCCIÓN ===
server.error.include-stacktrace=never
server.error.include-message=never

# Vencimiento de Cookie por inactividad
server.servlet.session.timeout=1h
